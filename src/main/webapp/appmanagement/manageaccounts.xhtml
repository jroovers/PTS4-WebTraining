<ui:composition template="../WEB-INF/template/defaultTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="metadata">
        <f:metadata>
            <f:event type="preRenderView" listener="#{authorizationBean.checkIfAdmin}"/>
        </f:metadata>
    </ui:define>
    <!-- Tabblad naam -->
    <ui:define name="title">Courserooster</ui:define>
    <!-- Content -->
    <ui:define name="content">
        <h:outputStylesheet library="style" name="ScheduleTable.css" />
        <div class="container">
            <div class="mt-3">
                <div class="row">
                    <h:form>
                        <div class="row" style="width: 800px">
                            <div class="col-4"> 
                                <div class="floating-box" style="float: left">
                                    <div>
                                        <h1>Docenten</h1>
                                        <hr/>
                                        <p:growl id="account_growl" />
                                        <p:selectOneListbox value="#{manageAccountBean.userID}" filter="true" valueChangeListener="#{manageAccountBean.valueChanged}" 
                                                            filterMatchMode="contains" styleClass="form-control" required="false"> <!--onchange="submit()"--> 
                                            <!--<f:valueChangeListener type="Listener.UserListener" />-->
                                            <f:ajax listener="#{manageAccountBean.changeListener()}" />
                                            <f:selectItems value="#{manageAccountBean.allUsers}" var="y"
                                                           itemLabel="#{y.getShortString()}" itemValue="#{y.userID}" />

                                            <f:ajax render="ajaxName ajaxSurname ajaxUsername ajaxPhoneNr ajaxEmail ajaxAccountType ajaxUserID" />

                                        </p:selectOneListbox>
                                    </div>
                                </div>
                            </div> 
                        </div>
                        <div class="col-8">
                            <div class="floating-box" style="float: left;">
                                <h1>Informatie</h1>
                                <hr/>
                                <!--<p:ajax process="@this" event="change" update="@form" partialSubmit="true" />-->  
                                <h:panelGrid columns="2" columnClasses="column" cellpadding="5">
                                    <h:outputLabel for="ajaxName" value="Voornaam: " />
                                    <p:inplace id="ajaxName" editor="true">
                                        <p:inputText  value="#{manageAccountBean.name}" required="true" label="text" />
                                    </p:inplace>  

                                    <h:outputLabel for="ajaxSurname" value="Achternaam: " />
                                    <p:inplace id="ajaxSurname" editor="true">
                                        <p:inputText  value="#{manageAccountBean.surname}" required="true" label="text" />
                                    </p:inplace> 

                                    <h:outputLabel for="ajaxUsername" value="Gebruikersnaam: " />
                                    <p:inplace id="ajaxUsername" editor="true">
                                        <p:inputText  value="#{manageAccountBean.username}" required="true" label="text"/>
                                    </p:inplace> 

                                    <h:outputLabel for="ajaxPhoneNr" value="Telefoon Nummer: " />
                                    <p:inplace id="ajaxPhoneNr" editor="true">
                                        <p:inputText  value="#{manageAccountBean.phonenr}" required="true" label="text"/>
                                    </p:inplace> 

                                    <h:outputLabel for="ajaxEmail" value="Email: " />
                                    <p:inplace id="ajaxEmail" editor="true">
                                        <p:inputText  value="#{manageAccountBean.email}" required="true" label="text"/>
                                    </p:inplace>                                     

                                    <h:outputLabel for="ajaxAccountType" value="Account Type:"/>
                                    <p:inplace id="ajaxAccountType" >
                                        <p:selectOneMenu value="#{manageAccountBean.accountType}">
                                            <f:selectItems value="#{manageAccountBean.accountTypes}" />
                                        </p:selectOneMenu> 
                                    </p:inplace> 

                                    <!--                                    <h:outputLabel for="ajaxUserID" value="UserID:" style="visibility: hidden;"/>
                                                                        <p:inplace id="ajaxUserID" editor="true" style="visibility: hidden;">
                                                                            <p:inputText  value="#{manageAccountBean.userID}" required="true" label="text" style="margin-left: 10px; visibility: hidden;" />
                                                                        </p:inplace>   -->
                                </h:panelGrid>
                                <div>
                                    <p:growl id="delete_growl" class=""/>
                                    <p:commandButton styleClass="mb-2 mr-sm-2 mb-sm-0" icon="fa fa-trash-o" value="Verwijderen" update="delete_growl" ajax="false" 
                                                     action="#{manageAccountBean.deleteUser()}" immediate="true"/>

                                    <p:growl id="edit_growl" class=""/>
                                    <p:commandButton styleClass="mb-2 mr-sm-2 mb-sm-0" icon="fa fa-pencil" value="Bewerken" update="edit_growl" ajax="false" 
                                                     action="#{manageAccountBean.editUser()}" immediate="true"/>
                                </div>
                            </div>
                        </div>
                    </h:form>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>